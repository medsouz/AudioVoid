<% layout('layout') -%>
<div class="mdl-grid">
	<div class="mdl-cell mdl-cell--4-col mdl-color--white mdl-color-text--black">
		<div class="mdl-card mdl-shadow--2dp mdl-color-text--grey-100" style="background: url('<%= getGravatar(user.email) %>') no-repeat center; height: 300px; width: 100%; background-size: cover;">
			<div class="mdl-card__title mdl-card--expand"></div>
			<div class="mdl-card__actions" style="background-color: rgba(0, 0, 0, 0.5)">
				<% if (!req.user || req.user.id != user.id) { /* Only show follow button if logged in and not on your own profile */ %>
					<button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-color-text--grey-100" style="float:right">Follow</button>
				<% } else { %>
					<button id="demo-menu-lower-right" class="mdl-button mdl-js-button mdl-button--icon" style="float: right">
						<i class="material-icons">more_vert</i>
					</button>
					<ul class="mdl-menu mdl-menu--top-right mdl-js-menu mdl-js-ripple-effect" for="demo-menu-lower-right">
						<a class="mdl-menu__item" href="http://en.gravatar.com/">Change Picture (Gravatar)</a>
						<li class="mdl-menu__item" onclick="$('#profileSettings')[0].showModal();">Edit Profile</li>
					</ul>
				<% } %>
				<b style="font-size: 1.5em"><%= user.username %></b>
			</div>
		</div>
	</div>
	<div class="mdl-cell mdl-cell--4-col mdl-color--white mdl-color-text--black scroll" style="padding: 15px; padding-top: 0px; height: 300px">
		<h3 class="center">About Me</h3>
		<p><%= user.bio %></p>
	</div>
	<div class="mdl-cell mdl-cell--4-col mdl-color--white mdl-color-text--black scroll" style="padding: 15px; padding-top: 0px">
		<% if (!req.user || req.user.id != user.id) { /* Only show follow button if logged in and not on your own profile */ %>
			<h3 class="center">Social</h3>
			<table>
				<tr>
					<td><i class="fa fa-twitter" style="color: #0000FF"></i></td>
					<td>Twitter - @<%= user.twitter %></td>
				</tr>
				<tr>
					<td><i class="fa fa-soundcloud" style="color: #FF7700"></i></td>
					<td>Soundcloud - <%= user.soundcloud %></td>
				</tr>
			</table>
		<% } else { %>
			<h3 class="center">Post</h3>
			<form action="/user/post" method="post">
				<textarea class="center" style="width: 90%; display: block; margin-bottom: 10px; height: 140px; resize: none;" name="post"></textarea>
				<button class="mdl-button mdl-js-button mdl-button--raised mdl-button--colored mdl-js-ripple-effect mdl-color--red-600 center" type="submit" value="Create Post">Create Post</button>
			</form>
		<% } %>
	</div>
	<!--<div class="mdl-cell mdl-cell--4-col mdl-color--white mdl-color-text--black-100 mdl-shadow--2dp">
		<h3 class="center" style="margin-top: 0px; margin-bottom: 0px"><i class="material-icons">cloud_upload</i></h3>
		<a class="mdl-button mdl-js-button mdl-button--raised mdl-button--colored mdl-js-ripple-effect mdl-color--red-600 center">Upload Song</a>
	</div>
	<div class="mdl-cell mdl-cell--4-col mdl-color--white mdl-color-text--black-100 mdl-shadow--2dp">
		<h1>Placeholder</h1>
	</div>-->

	<% for(var post = 0; post < 100; post++) { %>
		<div class="mdl-cell mdl-cell--6-col mdl-color--white mdl-color-text--black-100 mdl-shadow--2dp">
			<div class="mdl-grid">
				<div class="mdl-cell mdl-cell--2-col center">
					<img src="<%= getGravatar(user.email) %>" style="width: 100%;">
				</div>
				<div class="mdl-cell mdl-cell--10-col vertical-flex-parent">
					<div>
						This is the bake sale view where users would post statuses and they would pop on on the dashboard just like this. Other users will be able to like and repost a status..
					</div>
					<div class="mdl-card--expand"></div>
					<div>
						<div class="mdl-tooltip mdl-tooltip--large" for="btnLike<%=post%>">Like</div>
						<button id="btnLike<%=post%>" class="mdl-button mdl-js-button mdl-button--icon">
							<i class="material-icons">favorite</i>
						</button>
						<span>100</span>
						<div class="mdl-tooltip mdl-tooltip--large" for="btnRepost<%=post%>">Repost</div>
						<button id="btnRepost<%=post%>" class="mdl-button mdl-js-button mdl-button--icon">
							<i class="material-icons">repeat</i>
						</button>
						<span>100</span>
					</div>
				</div>
			</div>
		</div>
	<% } %>

</div>

<dialog id="profileSettings" class="mdl-dialog">
	<h4 class="mdl-dialog__title">Settings</h4>
	<form action="/user/settings" method="post">
		<div class="mdl-dialog__content">
			<h5>Bio</h5>
			<textarea name="bio"><%= user.bio %></textarea>
			<h5>Twitter</h5>
			<input type="text" name="twitter" maxlength="15" value="<%= user.twitter %>"></input>
			<h5>Soundcloud</h5>
			<input type="text" name="soundcloud" maxlength="30" value="<%= user.soundcloud %>"></input>
			<br>
		</div>
		<div class="mdl-dialog__actions">
			<button type="submit" class="mdl-button">Save</button>
			<button type="button" class="mdl-button close" onclick="$('#profileSettings')[0].close();">Cancel</button>
		</div>
	</form>
</dialog>
